<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:fragment="head">
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="Enrique Pajares Briso-Montiano">
<title>Tienda Online</title>
<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	 -->
<link th:href="@{/css/heroic-features.css}" rel="stylesheet">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
</head>
<body>

	<header th:fragment="header">
		<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">

			<a class="navbar-brand" th:href="@{/}">Tienda Online</a>
			<div style="width: 120px;"></div>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarCollapse" aria-controls="navbarCollapse"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<form class="form-inline mt-2 mt-md-0" method="post"
				th:action="@{/search}">
				<input class="form-control mr-sm-2" type="search"
					placeholder="Buscar" aria-label="Search" name="nombre"
					autocomplete="off">
				<button class="btn btn-outline-info my-2 my-sm-0" type="submit">Buscar</button>
			</form>
			<div style="width: 300px;"></div>
			<div class="collapse navbar-collapse" id="navbarCollapse">


				<div th:if="${session.idUsuario} == 1 "> 
					<ul class="navbar-nav mr-auto">
						<li sec:authorize="hasRole('ADMIN')" class="nav-item active mx-3">
							<a class="btn btn-outline-success my-2 my-sm-0"
							th:href="@{/productos}">Productos</a>
						</li>
						<li sec:authorize="hasRole('ADMIN')" class="nav-item mx-3"><a
							class="btn btn-outline-success my-2 my-sm-0"
							th:href="@{/administrador/usuarios}">Usuarios</a></li>
						<li sec:authorize="hasRole('ADMIN')" class="nav-item mx-3"><a
							class="btn btn-outline-success my-2 my-sm-0"
							th:href="@{/administrador/pedidos}">Pedidos</a></li>
						<li sec:authorize="hasRole('ADMIN')" class="nav-item mx-3"><a
							class="btn btn-outline-danger my-2 my-sm-0"
							th:href="@{/usuario/cerrar}">Salir</a></li>
						<li sec:authorize="hasRole('ADMIN')" class="nav-item mx-3"><a
							class="navbar-brand text-warning" th:href="@{/administrador}">
								Gesti√≥n: [[${#httpServletRequest.remoteUser}]]</a></li>
					</ul>
				</div> 

				<div th:if="${session.idUsuario} != 1 "> 
					<div th:if="${session.idUsuario} != null ">
						<ul class="navbar-nav mr-auto">
		
							<li sec:authorize="hasRole('USER')" class="nav-item mx-3"><a
								class="btn btn-outline-success my-2 my-sm-0"
								th:href="@{/usuario/shopping}">Compras</a></li>
							<!-- <li sec:authorize="hasRole('USER')" class="nav-item mx-3"><a
								class="btn btn-outline-success my-2 my-sm-0" th:href="@{/getCart}"><i
									class="bi bi-cart3"></i>Carrito</a></li> -->
							<li sec:authorize="hasRole('USER')" class="nav-item mx-3"><a
								class="btn btn-outline-danger my-2 my-sm-0"
								th:href="@{/usuario/cerrar}">Salir</a></li>
							<li sec:authorize="hasRole('USER')" class="nav-item mx-3"><a
								class="navbar-brand text-warning" th:href="@{/}"> Bienvenido:
									[[${#httpServletRequest.remoteUser}]]</a></li>
		
						</ul>
					 </div> 
				 </div>

				<a class="btn btn-info my-2 my-sm-0" th:href="@{/getCart}" th:if="${session.idUsuario} != 1 "><span><i class="bi bi-cart3"></i></span>Carrito</a>
				&emsp;
				<a class="btn btn-outline-warning my-2 my-sm-0"
					th:href="@{/usuario/login}" th:if="${session.idUsuario} == null ">Login / Register</a>

			



			</div>
		</nav>


		<!-- Mensajes flash -->
		<div class="alert alert-info alert-dismissible fade show" role="alert"
			th:if="${sesionCerrada != null}">
			<label th:text="${sesionCerrada}"></label>
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true"><i class="bi bi-x-circle-fill"></i></span>
			</button>
		</div>
		<div class="alert alert-danger alert-dismissible fade show"
			role="alert" th:if="${errorStock != null}">
			<label th:text="${errorStock}"></label>
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true"><i class="bi bi-x-circle-fill"></i></span>
			</button>
		</div>
		<div class="alert alert-success alert-dismissible fade show"
			role="alert" th:if="${pedidoRealizado != null}">
			<label th:text="${pedidoRealizado}"></label>
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true"><i class="bi bi-x-circle-fill"></i></span>
			</button>
		</div>


		<!-- <p th:text="${session.sessionActive}"></p>
	<p>[[${#httpServletRequest.remoteUser}]]</p>
	<p>Separador</p>
	<p th:text="${#httpServletRequest.remoteUser}"></p>
	<span th:text="${sesion.getAttribute('idUsuario').toString()}">Esto es el get attribute</span>
	<p th:text="${session}"></p>
	<p th:text="${session.username}"></p>
	
	<p th:text="${sesionAtributo}"></p>
	<p>Separador</p>
	<p th:text="${sessionActive}"></p> -->
	<!-- 	<p class="text-primary">Separador1</p>
		<p class="text-danger" th:text="${idUsuario}"></p>
		<p class="text-primary">Separador2</p>
		<p class="text-danger" th:text="${sesionAtributo}"></p>
		<p class="text-primary">Separador3</p>
		<p class="text-danger" th:text="${session.idUsuario}"></p>
		<p class="text-primary">Separador4</p>
		<p class="text-danger" th:text="${session.sessionActive}"></p>
		<p class="text-primary">Separador5</p> -->

	</header>


	<footer th:fragment="footer">
		<div class="container mx-3">
			<br> <br>
		</div>
		<div class="py-3 bg-dark fixed-bottom">
			<div class="container text-center text-white">
				<span class="m-0">Copyright &copy; Tienda Online Enrique
					Pajares 2022</span> <span><i class="bi bi-yin-yang"></i></span>
			</div>
			<!-- Bootstrap core JavaScript -->
			<!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
    	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
	 -->
			<script th:src="@{/jquery/jquery.min.js}"></script>
			<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
			<!-- <script th:src="@{/jquery/jquery.min.js}"></script>
    	<script th:src="@{/js/bootstrap.bundle.min.js}"></script> -->
			<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>    
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>-->
		</div>
	</footer>
</body>
</html>