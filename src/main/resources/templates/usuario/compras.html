<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="plantillas/plantilla_header_footer.html :: head">
</head>

<body>

    <!-- Navigation -->
    <!-- <div th:include="usuario/template_usuario.html::header" th:if="${sesion==null}"></div>
  
  	<div th:include="usuario/template_usuario.html::header-user" th:unless="${sesion==null}"></div> -->
  
  <header th:replace="plantillas/plantilla_header_footer.html :: header"></header>

		<div class="alert alert-danger alert-dismissible fade show"
			role="alert" th:if="${solicitudCancelacion != null}">
			<label th:text="${solicitudCancelacion}"></label>
			<button type="button" class="close" data-dismiss="alert"
				aria-label="Close">
				<span aria-hidden="true"><i class="bi bi-x-circle-fill"></i></span>
			</button>
		</div>
    <!-- Page Content -->
    <div class="container">


      <!-- Page Heading/Breadcrumbs -->
      <h1 class="mt-4 mb-3">
        Tienda Online <small>Compras</small>
      </h1>

      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
        <li class="breadcrumb-item active">Compras</li>
      </ol>

      <!-- Blog Post -->
      <div class="card mb-4">
        <div class="card-body">
          <div class="row">
           <div class="col-lg-12">
            <table class="table text-center">
              <thead>
                <tr>
                  <th scope="col">Nº de Factura</th>
                  <th scope="col">Valor Total</th>
                  <th scope="col">Estado</th>
                  <th scope="col">Método de pago</th>
                  <th scope="col">Fecha</th>                
                  <th scope="col">Ver</th>
                  <th scope="col">Cancelar</th>
                  <th scope="col">Exportar</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="pedido:${pedidos}">
                  <td th:text="${pedido.numFactura}"></td>
                  <td th:text="${pedido.total}"></td>
                  <td th:text="${pedido.estado}"></td>
                  <td th:text="${pedido.metodoPago}"></td>
                  <td th:text="${pedido.fecha}"></td>     
                  <td><a th:href="@{/usuario/detalle/}+${pedido.id}" class="btn btn-info">Detalle</a></td>
				  <td><a th:href="@{/usuario/cancelar/}+${pedido.id}" th:if="${pedido.estado == 'PE'}" class="btn btn-danger" onclick="return confirm('¿Está seguro de solicitar la cancelación?');">Cancelar</a></td>	 
                  <td><a th:if="${pedido.estado == 'E'}" class="btn btn-outline-danger justify-content-end" th:href="@{/usuario/exportarFacturaPDF/}+${pedido.id}">PDF</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /.container -->

 <!-- Footer -->
 <footer th:replace="plantillas/plantilla_header_footer.html :: footer"></footer>
	<!-- <div th:include="usuario/template_usuario.html::footer"></div>

	Bootstrap core JavaScript
	<script th:src="@{/jquery/jquery.min.js}"></script>
	<script th:src="@{/js/bootstrap.bundle.min.js}"></script> -->
	<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>-->

</body>

</html>
